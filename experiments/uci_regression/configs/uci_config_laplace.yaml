experiment:
  experiment_name: "uci"
  exp_dir: "experiments/experiments/"
wandb:
  project: uci_regression
  entity: uq-regression
  mode: offline

# everything to configure the UQ method
uq_method:
  _target_: lightning_uq_box.uq_methods.BaseModel
  model:
    _target_: lightning_uq_box.models.MLP # timm.create_model for timm models
    # all arguments to initiate the mlp for example
    n_outputs: 1
    n_hidden: [50]
  optimizer:
    _target_: torch.optim.Adam # can change optimizers here easily
    _partial_: true
    lr: 0.003
  loss_fn:
    _target_: torch.nn.MSELoss
  # quantiles: [0.1, 0.5, 0.9]

# everything to configure the datamodule  
datamodule:
  _target_: lightning_uq_box.datamodules.UCIRegressionDatamodule
  dataset_name: boston
  root: "/home/nils/projects/uq-method-box/experiments/data/uci"
  train_size: 0.9
  batch_size: 32
  num_workers: 4

post_processing:
  _target_: lightning_uq_box.uq_methods.LaplaceModel
  sigma_noise: 1.0
  prior_precision: 1.0
  prior_mean: 0.0
  temperature: 1.0
  subset_of_weights: "last_layer"
  hessian_structure: "kron"
  tune_precision_lr: 0.1
  n_epochs_tune_precision: 1

# all flags for the pytorch lightning trainer
trainer:
  _target_: lightning.pytorch.Trainer
  accelerator: cpu
  precision: 32
  max_epochs: 10
  max_steps: -1
  limit_val_batches: 0.0 # no validation set
  limit_test_batches: 1.0
  val_check_interval: 0.0 # no validation
  deterministic: False
  fast_dev_run: False
  log_every_n_steps: 10
  enable_progress_bar: True